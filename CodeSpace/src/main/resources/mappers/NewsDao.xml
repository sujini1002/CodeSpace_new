<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.team.cos.news.dao.NewsDao">

<select id="getNewsList" resultType="com.team.cos.news.vo.NewsInfo">
	select * 
	from news
	where n_no > 0
	order by n_no desc
	limit #{startNum}, #{perPageNum}
</select>

<select id="countNews" resultType="int">
	select count(*)
	from news
	where n_no>0 
</select>

<!-- 게시글 한개 보기 -->
<select id="getNewsView" resultType="com.team.cos.news.vo.NewsInfo">
	select *
	from news
	where n_no>0 and n_no=#{n_no}
</select>

<insert id="writeNews" parameterType="com.team.cos.news.vo.NewsInfo" useGeneratedKeys="true" keyColumn="n_no">
	<!-- insert into news
	(n_title, n_content, n_regdate)
	values (#{param1}, #{param2}, now()) -->
	
	insert into news (n_title, n_writer, n_content, n_regdate, n_viewcnt)
	values (#{n_title}, #{n_writer}, #{n_content}, now(), 0)

</insert>

<update id="editNews" parameterType="com.team.cos.news.vo.NewsInfo">
	update news set
	n_title = #{n_title},
	n_writer = #{n_writer},
	n_content = #{n_content},
	n_regdate = now()
	where n_no = #{n_no}
</update>
           
<delete id="deleteNews" >
	delete from news where n_no = #{n_no}
</delete>


<update id="n_viewcnt">
	update news 
	set	n_viewcnt = n_viewcnt +1
	where n_no = #{n_no}
</update>
</mapper>